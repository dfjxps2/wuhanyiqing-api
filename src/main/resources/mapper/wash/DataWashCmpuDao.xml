<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.dfjinxin.modules.wash.dao.DataWashCmpuDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.dfjinxin.modules.wash.entity.DataWashCmpuEntity" id="dataWashCmpuMap">
        <result property="dataWashCmpuid" column="Data_Wash_Cmpuid"/>
        <result property="dataWashCmpuCd" column="Data_Wash_Cmpu_Cd"/>
        <result property="dataWashCmpuNm" column="Data_Wash_Cmpu_Nm"/>
        <result property="dataWashCmpuDesc" column="Data_Wash_Cmpu_Desc"/>
        <result property="dataWashCmpuType" column="Data_Wash_Cmpu_Type"/>

        <result property="dataWashCmpuInternal" column="Data_Wash_Cmpu_Internal"/>
        <result property="dataWashCmpuJudgeExpr" column="Data_Wash_Cmpu_Judge_Expr"/>
        <result property="dataWashCmpuTransExpr" column="Data_Wash_Cmpu_Trans_Expr"/>
        <result property="dataWashCmpuEvalType" column="Data_Wash_Cmpu_Eval_Type"/>
        <result property="dataWashCmpuJudgeSouce" column="Data_Wash_Cmpu_Judge_Souce"/>
        <result property="dataWashCmpuTransSource" column="Data_Wash_Cmpu_Trans_Source"/>
        <result property="dataWashCmpuParaSpec" column="Data_Wash_Cmpu_Para_Spec"/>
    </resultMap>

    <select id="queryDataWashCmpuByDataWashCmpuType" parameterType="java.lang.Integer" resultMap="dataWashCmpuMap">
        select
            Data_Wash_Cmpuid, Data_Wash_Cmpu_Cd, Data_Wash_Cmpu_Nm, Data_Wash_Cmpu_Desc, Data_Wash_Cmpu_Type,
            Data_Wash_Cmpu_Internal, Data_Wash_Cmpu_Judge_Expr, Data_Wash_Cmpu_Trans_Expr, Data_Wash_Cmpu_Eval_Type,
            Data_Wash_Cmpu_Judge_Souce, Data_Wash_Cmpu_Trans_Source, Data_Wash_Cmpu_Para_Spec
        from
            data_wash_cmpu
        where
            Data_Wash_Cmpu_Type = #{dataWashCmpuType}
    </select>

    <select id="queryList" resultMap="dataWashCmpuMap">
      select Data_Wash_Cmpuid, Data_Wash_Cmpu_Cd, Data_Wash_Cmpu_Nm, Data_Wash_Cmpu_Desc, Data_Wash_Cmpu_Internal, Data_Wash_Cmpu_Eval_Type
      from data_wash_cmpu
      where Data_Wash_Cmpu_Type = '0'
        <if test="m.containsKey('keyWord') and m.keyWord != null and m.keyWord != ''">
        and (Data_Wash_Cmpu_Nm like concat('%',#{m.keyWord},'%') or Data_Wash_Cmpu_Cd like concat('%',#{m.keyWord},'%') )
        </if>
        <if test="m.containsKey('dataWashCmpuEvalType') and m.dataWashCmpuEvalType != null and m.dataWashCmpuEvalType != ''">
            and Data_Wash_Cmpu_Eval_Type = #{m.dataWashCmpuEvalType}
        </if>
      order by Data_Wash_Cmpu_Cd,Data_Wash_Cmpu_Nm
    </select>

    <select id="getInfo" resultType="int">
        select count(*) from data_wash_cmpu dwc
        where
        dwc.Data_Wash_Cmpu_Nm=#{name}
        and dwc.tnmtid=#{tnmtid}
        <if test="id != null">
        and dwc.Data_Wash_Cmpuid!=#{id}
        </if>
    </select>

</mapper>