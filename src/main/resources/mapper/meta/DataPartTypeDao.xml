<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.dfjinxin.modules.meta.dao.DataPartTypeDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.dfjinxin.modules.meta.entity.DataPartTypeEntity" id="dataPartTypeMap">
        <result property="partTypeid" column="Part_Typeid"/>
        <result property="partTypeDesc" column="Part_Type_Desc"/>
        <result property="partid" column="Partid"/>
    </resultMap>

    <select id="queryDataPartByTnmtid" parameterType="java.lang.Integer" resultMap="dataPartTypeMap">
        SELECT
            b.Partid as partid,
            a.part_Type_Desc
        FROM
            data_part_type a ,
            data_part b
        WHERE
            a.Part_Typeid = b.Part_Typeid
        AND b.Tnmtid = #{tnmtid}
    </select>

    <select id="queryDataPartRestrict" parameterType="java.util.Map" resultType="io.dfjinxin.modules.storage.dto.PartDto">
        SELECT
            b.Partid partid,
            a.part_Type_Desc name
        FROM
            data_part_type a ,
            data_part b
        WHERE
            a.Part_Typeid = b.Part_Typeid
        AND b.Tnmtid = #{Tnmtid}
        AND a.Part_Typeid in
        <foreach collection="partTypeids" item="id" index="index" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </select>

</mapper>