<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.dfjinxin.modules.meta.dao.DataSrcDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.dfjinxin.modules.meta.entity.DataSrcEntity" id="dataSrcMap">
        <result property="dataSrcid" column="Data_Srcid"/>
        <result property="dataSrcNm" column="Data_Src_Nm"/>
        <result property="dataSrcDepCd" column="Data_Src_Dep_Cd"/>
        <result property="dataSrcDepSysCd" column="Data_Src_Dep_Sys_Cd"/>
        <result property="departmentId" column="Department_Id"/>
    </resultMap>

    <select id="listByTnmt" resultType="map">
        select m1.data_src_nm,m1.data_srcid from data_src m1
        left join department m2 on m1.Department_Id = m2.department_id
        where m2.tnmtid=#{p.tnmtid}
        union
        select m1.data_src_nm,m1.data_srcid from data_tbl t1
        left join data_src m1 on t1.data_srcid=m1.data_srcid
        left join db m2 on m2.Dbid=t1.Dbid
        left join data_part m3 on m3.partid=m2.Partid
        where m3.tnmtid=#{p.tnmtid}
    </select>
</mapper>